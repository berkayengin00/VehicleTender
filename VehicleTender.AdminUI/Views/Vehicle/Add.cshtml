
@{
    ViewBag.Title = "AddVehicle";
    Layout = "~/Views/shared/_AdminLayout.cshtml";

}
@using System.Web.UI.WebControls
@model VehicleTender.Entity.View.VehicleAddVMForAdmin
<div class="container">

    @using (@Html.BeginForm("Add", "Vehicle", FormMethod.Post, new { @class = "well form-horizontal", enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
    <fieldset class="row">

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.LicensePlate, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.TextBoxFor(x => x.LicensePlate, new { @class = "form-control", required = true, PlaceHolder = "Plaka" })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.UserTypeId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.UserTypeId, @ViewBag.UserTypeList as List<SelectListItem> ,"Seçim Yapınız", new { @class = "form-select", required = true })
                </div>
            </div> 
        </div>


        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.UserId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.UserId, new List<SelectListItem>(),new { @class = "form-select", required = true ,disabled=true})
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.BrandId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.BrandId, Model.VehicleFeaturesForCache.Brands,"Marka Seçiniz" ,new { @class = "form-select", required = true })
                </div>
            </div>
        </div>

        <!-- Text input-->

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.ModelId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.ModelId, Model.VehicleFeaturesForCache.Models, new { @class = "form-select", required = true ,disabled=true})
                </div>
            </div>
        </div>

        <!-- Text input-->
        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.BodyTypeId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.BodyTypeId, Model.VehicleFeaturesForCache.BodyTypes, new { @class = "form-select", required = true })
                </div>
            </div>
        </div>


        <!-- Text input-->

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.FuelTypeId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.FuelTypeId, Model.VehicleFeaturesForCache.FuelTypes, new { @class = "form-select", required = true })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.GearTypeId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.GearTypeId, Model.VehicleFeaturesForCache.GearTypes, new { @class = "form-select", required = true })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.ColorId, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    @Html.DropDownListFor(x => x.ColorId, Model.VehicleFeaturesForCache.Colors, new { @class = "form-select", required = true })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.KiloMeter, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1"><i class="fa fa-car" aria-hidden="true"></i></span>
                    @Html.TextBoxFor(x => x.KiloMeter, new { @class = "form-control", Type = "number", placeholder = "Kilometre Bilgisi", required = "true" })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.Version, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1"><i class="fa fa-car" aria-hidden="true"></i></span>
                    @Html.TextBoxFor(x => x.Version, new { @class = "form-control", Type = "text", placeholder = "Versiyon Bilgisi", required = "true" })
                </div>
            </div>
        </div>

        <div class="form-group col-md-6">
            @Html.LabelFor(x => x.VehicleYear, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1"><i class="fa fa-car" aria-hidden="true"></i></span>
                    @Html.TextBoxFor(x => x.VehicleYear, new { @class = "form-control", Type = "number", placeholder = "Model Yılı", required = "true" })
                </div>
            </div>
        </div>
        
        <div class="form-group col-md-6">
	        @Html.LabelFor(x => x.VehiclePrice, new { @class = "col-md-4 control-label" })
	        <div class="inputGroupContainer">
		        <div class="input-group">
			        <span class="input-group-text" id="basic-addon1"><i class="fa fa-car" aria-hidden="true"></i></span>
			        @Html.TextBoxFor(x => x.VehiclePrice, new { @class = "form-control", Type = "number", placeholder = "Fiyat", required = "true" })
		        </div>
	        </div>
        </div>

        <div class="form-group col-md-12">
            @Html.LabelFor(x => x.Description, new { @class = "col-md-4 control-label" })
            <div class="inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1"><i class="fa fa-asterisk" aria-hidden="true"></i></span>
                    @Html.TextAreaFor(x => x.Description, new { @class = "form-control", Type = "text-area", placeholder = "Ek Özellikler", required = "true" })
                </div>
            </div>
        </div>

        <div class="form-group col-md-12">
            <input type="file" class="form-control" multiple name="Images" />
        </div>

        
        <div class="form-group col-md-12">
	        <input type="submit" name="name" value="Kaydet" class="btn btn-outline-success col-md-3 mr-5" />
            @if (Session["Tramer"]==null)
            {
	            @Html.ActionLink("Tramer Ekle","Add","Tramer",null, new {@class= "btn btn-primary col-md-3" })
            }
            else
            {
	           <input type="button" value="Tramer Kaydı Eklendi" disabled class="btn btn-primary col-md-3"/>
            }
	       
        </div>
        </fieldset>


    }
</div>

@section jscode
{

    <!-- dropzonejs -->
    <script src="~/TemplateContent/plugins/dropzone/min/dropzone.min.js"></script>

    <script>
     

        $(function () {
            $("#BrandId").change(function () {
                var selectedBrandId = $(this).val();
                ModelId.disabled = false;
                $.ajax({
                    url: "/Vehicle/GetModelByBrand",
                    type: "GET",
                    data: { brandId: selectedBrandId },
                    success: function (data) {
                        var modelsSelect = $("#ModelId");
                        modelsSelect.empty();
                        debugger;
                        $.each(data, function (index, model) {
                            modelsSelect.append($('<option/>', {
                                value: model.Value,
                                text: model.Text
                            }));
                        });
                    }
                });
            });
        });


        $(function () {
            $("#UserTypeId").change(function () {                
                var typeId = $(this).val();
                UserId.disabled = false;
                $.ajax({
                    url: "/Vehicle/GetUsersByUserType",
                    type: "GET",
                    data: { userTypeId: typeId },
                    success: function (data) {                        
                        var modelsSelect = $("#UserId");
                        modelsSelect.empty();
                        $.each(data, function (index, model) {
                            modelsSelect.append($('<option/>', {
                                value: model.Value,
                                text: model.Text
                            }));
                        });
                    }
                });
            });
        });



    </script>
}
